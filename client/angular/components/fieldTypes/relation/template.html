<div data-ng-class="{'error': !rfc.IsValid}">
    <!-- Search -->
    <div ng-hide="rfc.Entity.Data[rfc.FieldMetadata.FieldSystemName]">
        <input type="text"
               class="form-control errorElement entitySearch"
               placeholder="{{rfc.Resources.SearchForEntity}}"
               data-ng-model="rfc.SearchExpression"
               data-ng-change="rfc.ScheduleSearch()"/>
        <ul class="search-result-menu" ng-hide="!rfc.SearchTimer && !rfc.SearchResults">
            <li ng-show="rfc.SearchResults" class="search-result-item selectable" ng-repeat="item in rfc.SearchResults">
                <a ng-click="rfc.SelectItem(item)">{{item.Text}}</a>
            </li>
            <li ng-show="rfc.SearchResults && rfc.SearchResults.MoreResults > 0"
                class="search-result-item more-results">
                <a>{{rfc.Resources.MoreResults.format([SearchResults.MoreResults.toString()])}}</a>
            </li>
            <li ng-show="rfc.SearchTimer" class="search-result-item">
                <a>{{rfc.Resources.Searching}}</a>
            </li>
            <li ng-show="rfc.SearchResults && rfc.SearchResults.length == 0" class="search-result-item">
                <a ng-hide="rfc.SearchResults.HasError">{{rfc.Resources.NoSearchResults}}</a>
                <a ng-show="rfc.SearchResults.HasError">{{rfc.Resources.ErrorRetrievingSearchResults}}</a>
            </li>
        </ul>
    </div>
    <!-- Selected item -->
    <div class="btn-group btn-block" ng-show="rfc.Entity.Data[rfc.FieldMetadata.FieldSystemName]">
        <div>
            <button type="button" class="btn btn-default btn-sm form-control errorElement selectedItem">
                <span data-system-symbol="{{rfc.Entity.Data[rfc.FieldMetadata.FieldSystemName] && rfc.Entity.Data[rfc.FieldMetadata.FieldSystemName].Value}}"></span>
                <a ng-href="#{{rfc.GetFollowItemUrl(rfc.Entity.Data[rfc.FieldMetadata.FieldSystemName])}}" target="_blank">
                    {{(rfc.Entity.Data[rfc.FieldMetadata.FieldSystemName] && rfc.Entity.Data[rfc.FieldMetadata.FieldSystemName].Text)}}
                </a>
            </button>
        </div>
        <button type="button" class="btn btn-default btn-sm errorElement removeButton" ng-click="rfc.SelectItem(null)">
            <span class="glyphicon glyphicon-remove"></span>
        </button>
    </div>
</div>
